# 캡스톤 프로젝트: 일본 호텔 리뷰 텍스트 분석 기반 서비스 개선 우선순위 도출

## 📅 프로젝트 개요
| 구분 | 내용 |
| :--- | :--- |
| **목적** | 방대한 호텔 부정 리뷰를 정량화하고, 딥러닝(KOELECTRA) 및 토픽 모델링(BERTopic)을 결합 분석하여 서비스 개선의 우선순위를 데이터 기반으로 도출함. |
| **분석 대상** | 일본 호텔 리뷰 데이터 중 평점 3점 이하의 **부정 리뷰 15,186건** |
| **주요 기술** | Python, PyTorch, Transformers (KOELECTRA), BERTopic, Scikit-learn, Pandas |
| **모델링 목표** | 4가지 핵심 카테고리(A, B, C, D) 다중 라벨 분류 및 토픽 추출. |

---

## 1. 서론 (Introduction)

### 1.1. 배경 및 문제 정의
최근 일본 여행 수요가 급증함에 따라 한국인 여행객들이 경험하는 일본 호텔 서비스에 대한 관심이 높아지고 있다. 그러나 많은 리뷰가 온라인상에 파편화되어 있어, **일본 호텔 이용객들이 공통적으로 겪는 불편함**이 무엇인지, 그리고 그 불만 사항이 **시설 문제인지, 서비스 문제인지, 혹은 가격이나 위치 문제인지** 명확히 파악하기 어렵다.

본 프로젝트는 이러한 문제를 해결하고, 일본 호텔들이 개선해야 할 **구체적인 약점**을 찾아내는 데 중점을 둔다.

* **문제 정의:** 방대한 부정 리뷰 텍스트를 분석하여, 사람들이 **"일본 호텔에서 어떠한 문제로 인하여 불편함을 겪고 있는지"**를 4가지 핵심 카테고리(시설, 서비스, 가격, 위치)로 정량화하고, 카테고리 내의 **가장 시급한 불만 토픽**을 추출한다.
* **프로젝트 목표:** 데이터 기반의 분석 결과를 통해, 일본 호텔 경영진에게 고객 만족도를 높일 수 있는 **가장 시급한 서비스 개선 우선순위**를 제시한다.

### 1.2. 핵심 과업 요약
1.  **데이터 수집/전처리:** 50,000건 이상의 리뷰 수집 및 부정 리뷰(15,186건)를 추출한다.
2.  **데이터 라벨링:** 2,500건의 리뷰에 대해 4가지 카테고리(A, B, C, D) 다중 라벨을 부여한다.
3.  **딥러닝 모델 학습:** KOELECTRA 모델을 학습시켜 전체 부정 리뷰를 4가지 카테고리로 자동 분류 (**추론(Inference)**)한다.
4.  **심층 분석:** 분류 결과와 BERTopic을 결합하여, 각 카테고리 내의 **가장 시급한 구체적 토픽**을 도출한다.

---

## 2. 데이터 수집 및 전처리

### 2.1. 데이터 수집 방법
* **크롤링 도구:** `Selenium`을 활용하여 동적 웹 페이지에서 리뷰 텍스트 및 평점을 수집했다.
* **크롤링 코드:** [본 Repository의 `crawling_script.py` 파일을 참조한다.]
* **최종 데이터셋:** 전체 수집 리뷰 중 **평점 3점 이하의 부정 리뷰 15,186건**을 분석의 최종 대상으로 선정했다.

### 2.2. 데이터 전처리
* **정제:** 리뷰 텍스트에서 결측치를 제거하고, 불필요한 특수문자 및 이모지 등을 정제했다.
* **토큰화:** KOELECTRA 모델(`monologg/koelectra-base-v3-discriminator`)의 토크나이저를 사용하여 입력 데이터를 `input_ids`와 `attention_mask`로 변환했다.

---

## 3. 학습 데이터 라벨링 과정

### 3.1. 라벨 정의 (4가지 핵심 카테고리)
호텔 서비스 개선의 핵심 카테고리를 기준으로 4가지 다중 라벨을 정의했다.

| 라벨 | 카테고리 명 | 상세 설명 |
| :---: | :--- | :--- |
| **A** | 시설/청결 | 객실 크기, 청소 상태, 노후화, 와이파이, 어메니티 등 하드웨어적 요소 |
| **B** | 서비스/직원 응대 | 직원 친절도, 체크인 속도, 요청 처리, 소통 등 소프트웨어적 요소 |
| **C** | 가격/가성비 | 숙박비 대비 만족도, 비쌈/저렴함 언급, 재방문 의사 언급 |
| **D** | 위치/주변 환경 | 교통 접근성, 주변 소음(방음), 관광지 근접성, 뷰 |

### 3.2. 라벨링 및 데이터셋 구축
1.  **데이터 추출:** 부정 리뷰 15,186건 중 **2,500건**을 무작위 추출했다.
2.  **도구 활용:** Gemini Pro를 활용하여 초벌 다중 라벨링을 수행한 후, 수동 검토를 통해 정확도를 확보했다.
3.  **데이터 형식:** JSON 형태의 라벨링 결과를 이진(Binary) 컬럼을 포함하는 CSV 파일 (`review_sample_2500_encoded.csv`)로 변환하여 모델 학습에 사용했다.

---

## 4. 탐색적 데이터 분석 (EDA)

### 4.1. 데이터의 분포 시각화
* **전체 리뷰 평점 분포:** 긍정/부정 리뷰 비율을 시각화하여 부정 리뷰(3점 이하) 추출의 정당성을 확보했다.
* **라벨 빈도 분포:** 학습 데이터셋(2,500건) 내에서 각 라벨(A, B, C, D)이 부여된 횟수를 시각화하여 클래스 불균형 정도를 파악했다.


### 4.2. 학습 데이터 추출 및 분할 기준
* **대상:** 평점 3점 이하 부정 리뷰 15,186건
* **학습셋:** 2,500건 (전체 부정 리뷰의 약 16.5%에 해당)
* **분할:** 학습(Train) 80% / 검증(Validation) 20%로 분할하여 모델 학습에 사용했다.

---

## 5. KOELECTRA 모델 학습 결과

### 5.1. 모델 개요 및 설정
* **모델 아키텍처:** KOELECTRA For Sequence Classification
* **Pre-trained Model:** `monologg/koelectra-base-v3-discriminator`
* **Batch Size:** 32
* **Epoch:** 4

### 5.2. 학습 결과 및 평가 지표 (예정)
모델은 다중 라벨 분류에 적합한 **BCEWithLogitsLoss**를 사용하여 학습되었으며, **Validation F1 (Micro) Score**를 주요 지표로 평가했다.

<img width="1392" height="320" alt="에포크 사진" src="https://github.com/user-attachments/assets/7bf3c4f6-9c82-490e-8282-2258e7f1dbf1" />


* **학습 결과 그래프:**


### 5.3. 추론 (Inference) 결과
학습 완료된 모델을 사용하여 전체 부정 리뷰(15,186건)에 대해 4가지 카테고리를 예측하고, 그 결과를 `full_negative_reviews_classified.csv` 파일로 저장하여 후속 분석 단계의 기반을 마련했다.

---

## 6. 최종 결론 도출 (토픽 모델링 연계)

### 6.1. 분석 방법론 (BERTopic + 분류 결과 결합)
최종 결론 부분에서는 **토픽 모델링(BERTopic)** 결과를 기반으로 핵심적인 현상과 주장을 뒷받침하는 근거를 제시할 계획이다.

1.  **토픽 추출:** KOELECTRA 분류 결과가 추가된 전체 부정 리뷰에 대해 BERTopic을 적용하여 구체적인 불만 토픽을 추출한다.
2.  **군집화 및 시계열 특성:**
    * **토픽 군집화:** 추출된 토픽을 군집화하여 토픽 간의 관계를 파악하고 시각화한다.
    * **시계열 분석:** (선택 사항) 토픽 발생 빈도의 시간적 변화를 분석하여 특정 불만 사항이 시기적 특성을 가지는지 검토한다.
3.  **최종 결론:** **KOELECTRA 분류 라벨**과 **BERTopic 토픽**을 결합하여, "카테고리 [A] 내에서 가장 시급한 불만 토픽은 [X 토픽]이다"라는 형태의 **데이터 기반 구체적인 서비스 개선 우선순위**를 제시한다.

### 6.2. 결론 및 제언 (예정)
* **주장 및 근거:** 추출된 토픽의 빈도수 및 해당 토픽이 특정 카테고리(A, B, C, D)에 속하는 비율을 근거로 제시한다.
* **경영 전략 제언:** 호텔 경영진에게 즉시 적용 가능한 1~3가지 핵심 개선 방안을 제시한다.

---

## 7. Repository Code Structure

# 캡스톤 프로젝트: 일본 호텔 리뷰 텍스트 분석 기반 서비스 개선 우선순위 도출

## 📅 프로젝트 개요
| 구분 | 내용 |
| :--- | :--- |
| **목적** | 방대한 호텔 부정 리뷰를 정량화하고, 딥러닝(KOELECTRA) 및 토픽 모델링(BERTopic)을 결합 분석하여 서비스 개선의 우선순위를 데이터 기반으로 도출. |
| **분석 대상** | 일본 호텔 리뷰 데이터 중 평점 3점 이하의 **부정 리뷰 15,186건** |
| **주요 기술** | Python, PyTorch, Transformers (KOELECTRA), BERTopic, Scikit-learn, Pandas |
| **모델링 목표** | 4가지 핵심 카테고리(A, B, C, D) 다중 라벨 분류 및 토픽 추출. |

---

## 1. 서론 (Introduction)

### 1.1. 배경 및 문제 정의
호텔 경영에서 고객 리뷰는 매우 중요하지만, 텍스트 형태의 불만 사항을 효율적으로 분석하고 핵심 문제점을 찾아 우선순위를 정하는 것은 어렵습니다. 본 프로젝트는 이 문제를 해결하기 위해 딥러닝 기반의 자동 분류 시스템을 구축하고, 그 분류 결과를 바탕으로 구체적인 불만 토픽을 추출하는 시스템을 설계했습니다.

### 1.2. 핵심 과업 요약
1.  **데이터 수집/전처리:** 50,000건 이상의 리뷰 수집 및 부정 리뷰(15,186건) 추출.
2.  **데이터 라벨링:** 2,500건의 리뷰에 대해 4가지 카테고리(A, B, C, D) 다중 라벨 부여.
3.  **딥러닝 모델 학습:** KOELECTRA 모델을 학습시켜 전체 부정 리뷰를 4가지 카테고리로 자동 분류 (**추론(Inference)**).
4.  **심층 분석:** 분류 결과와 BERTopic을 결합하여, 각 카테고리 내의 **가장 시급한 구체적 토픽**을 도출.

---

## 2. 데이터 수집 및 전처리

### 2.1. 데이터 수집 방법
* **크롤링 도구:** `Selenium`을 활용하여 동적 웹 페이지에서 리뷰 텍스트 및 평점을 수집했습니다.
* **크롤링 코드:** [본 Repository의 `crawling_script.py` 파일을 참조하십시오.]
* **최종 데이터셋:** 전체 수집 리뷰 중 **평점 3점 이하의 부정 리뷰 15,186건**을 분석의 최종 대상으로 확정했습니다.

### 2.2. 데이터 전처리
* **정제:** 리뷰 텍스트에서 결측치 제거, 불필요한 특수문자 및 이모지 제거.
* **토큰화:** KOELECTRA 모델(`monologg/koelectra-base-v3-discriminator`)의 토크나이저를 사용하여 입력 데이터를 `input_ids`와 `attention_mask`로 변환했습니다.

---

## 3. 학습 데이터 라벨링 과정

### 3.1. 라벨 정의 (4가지 핵심 카테고리)
부정 리뷰의 원인을 구조화하기 위해 상호 배타적이지 않은 다중 라벨을 정의했습니다.

| 라벨 | 카테고리 명 | 상세 설명 |
| :---: | :--- | :--- |
| **A** | 시설/청결 | 객실 상태, 청소, 노후화, 와이파이, 어메니티 등 하드웨어 요소 |
| **B** | 서비스/직원 응대 | 직원 태도, 체크인/아웃 속도, 요청 처리, 소통 등 소프트웨어 요소 |
| **C** | 가격/가성비 | 숙박비에 대한 만족도, 비쌈/저렴함, 재방문 의사 등 경제적 평가 |
| **D** | 위치/주변 환경 | 교통 접근성, 주변 소음(방음), 관광지 근접성, 뷰 |

### 3.2. 라벨링 및 데이터셋 구축
1.  **데이터 추출:** 부정 리뷰 15,186건 중 **2,500건**을 무작위 추출했습니다.
2.  **도구 활용:** Gemini Pro를 활용하여 초벌 다중 라벨링을 수행한 후, 수동 검토를 통해 정확도를 확보했습니다.
3.  **데이터 형식:** JSON 형태의 라벨링 결과를 이진(Binary) 컬럼을 포함하는 CSV 파일 (`review_sample_2500_encoded.csv`)로 변환하여 모델 학습에 사용했습니다.

---

## 4. 탐색적 데이터 분석 (EDA)

### 4.1. 데이터의 분포 시각화
* **전체 평점 분포:** (첨부된 이미지 참조) 전체 리뷰 중 부정 리뷰가 차지하는 비율을 시각화하여 분석의 필요성을 강조했습니다.
* **라벨 빈도 분포:** 학습 데이터셋(2,500건) 내에서 각 라벨(A, B, C, D)이 부여된 횟수를 시각화했습니다.
    * 이를 통해 가장 빈번하게 언급되는 불만 카테고리(예: A 또는 B)를 사전에 파악하고, 모델 학습 시 불균형 정도를 확인했습니다.


### 4.2. 학습 데이터 추출 및 분할
* **학습 데이터 크기:** 2,500건
* **분할 비율:** 학습셋(Train) 80% / 검증셋(Validation) 20%
* **목적:** 학습된 모델을 **나머지 12,686건의 미라벨링 데이터에 적용(Inference)**하여 전체 부정 리뷰에 대한 정량적 분석 기반을 마련했습니다.

---

## 5. KOELECTRA 모델 학습 결과

### 5.1. 모델 개요 및 설정
* **모델 아키텍처:** KOELECTRA For Sequence Classification
* **Pre-trained Model:** `monologg/koelectra-base-v3-discriminator`
* **Batch Size:** 32
* **Epoch:** 4

### 5.2. 학습 결과 및 평가 지표 (예정)
모델은 다중 라벨 분류에 적합한 **BCEWithLogitsLoss**를 사용하여 학습되었습니다.

* **주요 평가 지표:** 다중 라벨 분류의 종합 성능 평가를 위해 **Validation F1 (Micro) Score**를 사용했습니다.

| Epoch | Train Loss | Validation Accuracy (Subset) | Validation F1 (Micro) |
| :---: | :---: | :---: | :---: |
| 1 | X.XXXX | X.XXXX | X.XXXX |
| 2 | X.XXXX | X.XXXX | X.XXXX |
| 3 | X.XXXX | X.XXXX | X.XXXX |
| 4 | X.XXXX | X.XXXX | X.XXXX |

* **학습 결과 그래프:**


### 5.3. 추론 (Inference) 결과
학습 완료된 모델을 사용하여 전체 부정 리뷰(15,186건)에 대해 4가지 카테고리를 예측하고, 그 결과를 `full_negative_reviews_classified.csv` 파일로 저장하여 후속 분석 단계에 활용했습니다.
